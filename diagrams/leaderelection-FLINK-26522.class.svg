<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="787px" preserveAspectRatio="none" style="width:1642px;height:787px;background:#FFFFFF;" version="1.1" viewBox="0 0 1642 787" width="1642px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="1061" x="283.5" y="22.9951">Proposed refactoring (Version 2) of the multi-component Leader Election that was introduced in Apache Flink 1.15+ (FLINK-26522)</text><!--class LeaderContender--><g id="elem_LeaderContender"><rect codeLine="5" fill="#F1F1F1" height="88.8906" id="LeaderContender" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="288" x="453.5" y="44.2969"/><ellipse cx="530.75" cy="60.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M531.7031,57.0781 L533.4219,57.0781 C533.8125,57.0781 534,57.0469 534.125,56.9688 C534.3906,56.8125 534.5313,56.5313 534.5313,56.2344 C534.5313,55.9688 534.4219,55.7031 534.1875,55.5313 C534.0156,55.4219 533.875,55.3906 533.4219,55.3906 L528.2813,55.3906 C527.8438,55.3906 527.7188,55.4063 527.5625,55.5 C527.3125,55.6563 527.1563,55.9531 527.1563,56.2344 C527.1563,56.5156 527.2969,56.7656 527.5156,56.9375 C527.6719,57.0469 527.8594,57.0781 528.2813,57.0781 L530,57.0781 L530,63.5938 L528.2813,63.5938 C527.8438,63.5938 527.7188,63.6094 527.5625,63.7188 C527.3125,63.875 527.1563,64.1563 527.1563,64.4531 C527.1563,64.7031 527.2969,64.9688 527.5156,65.125 C527.6719,65.25 527.875,65.2969 528.2813,65.2969 L533.4219,65.2969 C534.1719,65.2969 534.5313,65.0156 534.5313,64.4531 C534.5313,64.1719 534.4219,63.9219 534.1875,63.75 C534.0156,63.625 533.875,63.5938 533.4219,63.5938 L531.7031,63.5938 L531.7031,57.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="125" x="551.25" y="65.1436">LeaderContender</text><line style="stroke:#181818;stroke-width:0.5;" x1="454.5" x2="740.5" y1="76.2969" y2="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="276" x="459.5" y="93.292">void grantLeadership(leaderSessionID)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="459.5" y="109.5889">void revokeLeadership()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="459.5" y="125.8857">String getDescription()</text></g><g id="elem_GMN3"><path d="M776.5,68.7969 L776.5,84.7969 L741.562,88.7969 L776.5,92.7969 L776.5,109.0625 A0,0 0 0 0 776.5,109.0625 L1058.5,109.0625 A0,0 0 0 0 1058.5,109.0625 L1058.5,78.7969 L1048.5,68.7969 L776.5,68.7969 A0,0 0 0 0 776.5,68.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1048.5,68.7969 L1048.5,78.7969 L1058.5,78.7969 L1048.5,68.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="782.5" y="85.8638">LeaderContender.getDescription()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="786.5" y="100.9966">is used to replace the componentId</text></g><!--class LeaderElectionDriver--><g id="elem_LeaderElectionDriver"><rect codeLine="13" fill="#F1F1F1" height="88.8906" id="LeaderElectionDriver" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="361" x="1074" y="525.2969"/><ellipse cx="1174.75" cy="541.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1175.7031,538.0781 L1177.4219,538.0781 C1177.8125,538.0781 1178,538.0469 1178.125,537.9688 C1178.3906,537.8125 1178.5313,537.5313 1178.5313,537.2344 C1178.5313,536.9688 1178.4219,536.7031 1178.1875,536.5313 C1178.0156,536.4219 1177.875,536.3906 1177.4219,536.3906 L1172.2813,536.3906 C1171.8438,536.3906 1171.7188,536.4063 1171.5625,536.5 C1171.3125,536.6563 1171.1563,536.9531 1171.1563,537.2344 C1171.1563,537.5156 1171.2969,537.7656 1171.5156,537.9375 C1171.6719,538.0469 1171.8594,538.0781 1172.2813,538.0781 L1174,538.0781 L1174,544.5938 L1172.2813,544.5938 C1171.8438,544.5938 1171.7188,544.6094 1171.5625,544.7188 C1171.3125,544.875 1171.1563,545.1563 1171.1563,545.4531 C1171.1563,545.7031 1171.2969,545.9688 1171.5156,546.125 C1171.6719,546.25 1171.875,546.2969 1172.2813,546.2969 L1177.4219,546.2969 C1178.1719,546.2969 1178.5313,546.0156 1178.5313,545.4531 C1178.5313,545.1719 1178.4219,544.9219 1178.1875,544.75 C1178.0156,544.625 1177.875,544.5938 1177.4219,544.5938 L1175.7031,544.5938 L1175.7031,538.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="151" x="1195.25" y="546.1436">LeaderElectionDriver</text><line style="stroke:#181818;stroke-width:0.5;" x1="1075" x2="1434" y1="557.2969" y2="557.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="349" x="1080" y="574.292">void writeLeaderInformation(LeaderInformation)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="1080" y="590.5889">boolean hasLeadership()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1080" y="606.8857">void close()</text></g><!--class LeaderElectionEventHandler--><g id="elem_LeaderElectionEventHandler"><rect codeLine="20" fill="#F1F1F1" height="88.8906" id="LeaderElectionEventHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="392" x="586.5" y="691.2969"/><ellipse cx="676.25" cy="707.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M677.2031,704.0781 L678.9219,704.0781 C679.3125,704.0781 679.5,704.0469 679.625,703.9688 C679.8906,703.8125 680.0313,703.5313 680.0313,703.2344 C680.0313,702.9688 679.9219,702.7031 679.6875,702.5313 C679.5156,702.4219 679.375,702.3906 678.9219,702.3906 L673.7813,702.3906 C673.3438,702.3906 673.2188,702.4063 673.0625,702.5 C672.8125,702.6563 672.6563,702.9531 672.6563,703.2344 C672.6563,703.5156 672.7969,703.7656 673.0156,703.9375 C673.1719,704.0469 673.3594,704.0781 673.7813,704.0781 L675.5,704.0781 L675.5,710.5938 L673.7813,710.5938 C673.3438,710.5938 673.2188,710.6094 673.0625,710.7188 C672.8125,710.875 672.6563,711.1563 672.6563,711.4531 C672.6563,711.7031 672.7969,711.9688 673.0156,712.125 C673.1719,712.25 673.375,712.2969 673.7813,712.2969 L678.9219,712.2969 C679.6719,712.2969 680.0313,712.0156 680.0313,711.4531 C680.0313,711.1719 679.9219,710.9219 679.6875,710.75 C679.5156,710.625 679.375,710.5938 678.9219,710.5938 L677.2031,710.5938 L677.2031,704.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="204" x="696.75" y="712.1436">LeaderElectionEventHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="587.5" x2="977.5" y1="723.2969" y2="723.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="327" x="592.5" y="740.292">void onGrantLeadership(newLeaderSessionId)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="592.5" y="756.5889">void onRevokeLeadership()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="592.5" y="772.8857">void onLeaderInformationChange(leaderInformation)</text></g><!--class LeaderElectionService--><g id="elem_LeaderElectionService"><rect codeLine="27" fill="#F1F1F1" height="72.5938" id="LeaderElectionService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192" x="1169.5" y="233.2969"/><ellipse cx="1184.5" cy="249.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1185.4531,246.0781 L1187.1719,246.0781 C1187.5625,246.0781 1187.75,246.0469 1187.875,245.9688 C1188.1406,245.8125 1188.2813,245.5313 1188.2813,245.2344 C1188.2813,244.9688 1188.1719,244.7031 1187.9375,244.5313 C1187.7656,244.4219 1187.625,244.3906 1187.1719,244.3906 L1182.0313,244.3906 C1181.5938,244.3906 1181.4688,244.4063 1181.3125,244.5 C1181.0625,244.6563 1180.9063,244.9531 1180.9063,245.2344 C1180.9063,245.5156 1181.0469,245.7656 1181.2656,245.9375 C1181.4219,246.0469 1181.6094,246.0781 1182.0313,246.0781 L1183.75,246.0781 L1183.75,252.5938 L1182.0313,252.5938 C1181.5938,252.5938 1181.4688,252.6094 1181.3125,252.7188 C1181.0625,252.875 1180.9063,253.1563 1180.9063,253.4531 C1180.9063,253.7031 1181.0469,253.9688 1181.2656,254.125 C1181.4219,254.25 1181.625,254.2969 1182.0313,254.2969 L1187.1719,254.2969 C1187.9219,254.2969 1188.2813,254.0156 1188.2813,253.4531 C1188.2813,253.1719 1188.1719,252.9219 1187.9375,252.75 C1187.7656,252.625 1187.625,252.5938 1187.1719,252.5938 L1185.4531,252.5938 L1185.4531,246.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="160" x="1198.5" y="254.1436">LeaderElectionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="1170.5" x2="1360.5" y1="265.2969" y2="265.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1175.5" y="282.292">void start()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1175.5" y="298.5889">void close()</text></g><g id="elem_GMN9"><path d="M1094,68.7969 L1094,109.0625 A0,0 0 0 0 1094,109.0625 L1323.12,109.0625 L1279.24,233.1649 L1331.12,109.0625 L1575,109.0625 A0,0 0 0 0 1575,109.0625 L1575,78.7969 L1565,68.7969 L1094,68.7969 A0,0 0 0 0 1094,68.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1565,68.7969 L1565,78.7969 L1575,78.7969 L1565,68.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166" x="1100" y="85.8638">LeaderElectionService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="1270" y="85.8638">is handling the LeaderElectionDriver lifecycle.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354" x="1100" y="100.9966">It is created and owned by the HighAvailabilityServices.</text></g><g id="elem_GMN12"><path d="M1052,384.2969 L1052,439.6953 A0,0 0 0 0 1052,439.6953 L1479,439.6953 A0,0 0 0 0 1479,439.6953 L1479,394.2969 L1469,384.2969 L1269.5,384.2969 L1265.5,306.4869 L1261.5,384.2969 L1052,384.2969 A0,0 0 0 0 1052,384.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1469,384.2969 L1469,394.2969 L1479,394.2969 L1469,384.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="1058" y="401.3638">We could even make this a generic interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="1348" y="401.3638">ServiceAsync</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="1058" y="416.4966">that extends</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="1144" y="416.4966">AutoCloseableAsync</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1300" y="416.4966">since it's a quite common</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="1058" y="431.6294">pattern.</text></g><!--class LeaderElectionRegistry--><g id="elem_LeaderElectionRegistry"><rect codeLine="42" fill="#F1F1F1" height="56.2969" id="LeaderElectionRegistry" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="317" x="457" y="241.7969"/><ellipse cx="528.75" cy="257.7969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M529.7031,254.5781 L531.4219,254.5781 C531.8125,254.5781 532,254.5469 532.125,254.4688 C532.3906,254.3125 532.5313,254.0313 532.5313,253.7344 C532.5313,253.4688 532.4219,253.2031 532.1875,253.0313 C532.0156,252.9219 531.875,252.8906 531.4219,252.8906 L526.2813,252.8906 C525.8438,252.8906 525.7188,252.9063 525.5625,253 C525.3125,253.1563 525.1563,253.4531 525.1563,253.7344 C525.1563,254.0156 525.2969,254.2656 525.5156,254.4375 C525.6719,254.5469 525.8594,254.5781 526.2813,254.5781 L528,254.5781 L528,261.0938 L526.2813,261.0938 C525.8438,261.0938 525.7188,261.1094 525.5625,261.2188 C525.3125,261.375 525.1563,261.6563 525.1563,261.9531 C525.1563,262.2031 525.2969,262.4688 525.5156,262.625 C525.6719,262.75 525.875,262.7969 526.2813,262.7969 L531.4219,262.7969 C532.1719,262.7969 532.5313,262.5156 532.5313,261.9531 C532.5313,261.6719 532.4219,261.4219 532.1875,261.25 C532.0156,261.125 531.875,261.0938 531.4219,261.0938 L529.7031,261.0938 L529.7031,254.5781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="165" x="549.25" y="262.6436">LeaderElectionRegistry</text><line style="stroke:#181818;stroke-width:0.5;" x1="458" x2="773" y1="273.7969" y2="273.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="305" x="463" y="290.792">LeaderElection register(LeaderContender)</text></g><!--class LeaderElection--><g id="elem_LeaderElection"><rect codeLine="47" fill="#F1F1F1" height="88.8906" id="LeaderElection" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="415" x="7" y="225.2969"/><ellipse cx="156.75" cy="241.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M157.7031,238.0781 L159.4219,238.0781 C159.8125,238.0781 160,238.0469 160.125,237.9688 C160.3906,237.8125 160.5313,237.5313 160.5313,237.2344 C160.5313,236.9688 160.4219,236.7031 160.1875,236.5313 C160.0156,236.4219 159.875,236.3906 159.4219,236.3906 L154.2813,236.3906 C153.8438,236.3906 153.7188,236.4063 153.5625,236.5 C153.3125,236.6563 153.1563,236.9531 153.1563,237.2344 C153.1563,237.5156 153.2969,237.7656 153.5156,237.9375 C153.6719,238.0469 153.8594,238.0781 154.2813,238.0781 L156,238.0781 L156,244.5938 L154.2813,244.5938 C153.8438,244.5938 153.7188,244.6094 153.5625,244.7188 C153.3125,244.875 153.1563,245.1563 153.1563,245.4531 C153.1563,245.7031 153.2969,245.9688 153.5156,246.125 C153.6719,246.25 153.875,246.2969 154.2813,246.2969 L159.4219,246.2969 C160.1719,246.2969 160.5313,246.0156 160.5313,245.4531 C160.5313,245.1719 160.4219,244.9219 160.1875,244.75 C160.0156,244.625 159.875,244.5938 159.4219,244.5938 L157.7031,244.5938 L157.7031,238.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="107" x="177.25" y="246.1436">LeaderElection</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="421" y1="257.2969" y2="257.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="13" y="274.292">void confirmLeadership(leaderSessionID, leaderAddress)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="287" x="13" y="290.5889">boolean hasLeadership(leaderSessionId)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="13" y="306.8857">void close()</text></g><g id="elem_GMN17"><path d="M29,53.2969 L29,123.8281 A0,0 0 0 0 29,123.8281 L210.5,123.8281 L214.5,225.1949 L218.5,123.8281 L400,123.8281 A0,0 0 0 0 400,123.8281 L400,63.2969 L390,53.2969 L29,53.2969 A0,0 0 0 0 29,53.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M390,53.2969 L390,63.2969 L400,63.2969 L390,53.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51" x="35" y="70.3638">close()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="90" y="70.3638">is used to unregister the LeaderContender</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="35" y="85.4966">from the LeaderElectionRegistry. It is equivalent to the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="35" y="100.6294">legacy</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="214" x="81" y="100.6294">DefaultLeaderService.stop()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="299" y="100.6294">method.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="35" y="115.7622">LeaderElection could extend AutoCloseableAsync.</text></g><!--class DefaultLeaderElection--><g id="elem_DefaultLeaderElection"><rect codeLine="60" fill="#F1F1F1" height="72.5938" id="DefaultLeaderElection" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="245" x="367" y="533.2969"/><ellipse cx="405.4" cy="549.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M407.7438,544.9688 C406.8063,544.5313 406.2125,544.3906 405.3375,544.3906 C402.7125,544.3906 400.7125,546.4688 400.7125,549.1875 L400.7125,550.3125 C400.7125,552.8906 402.8219,554.7813 405.7125,554.7813 C406.9313,554.7813 408.0875,554.4844 408.8375,553.9375 C409.4156,553.5313 409.7438,553.0781 409.7438,552.6875 C409.7438,552.2344 409.3531,551.8438 408.8844,551.8438 C408.6656,551.8438 408.4625,551.9219 408.275,552.1094 C407.8219,552.5938 407.8219,552.5938 407.6344,552.6875 C407.2125,552.9531 406.525,553.0781 405.7594,553.0781 C403.7125,553.0781 402.4156,551.9844 402.4156,550.2813 L402.4156,549.1875 C402.4156,547.4063 403.6656,546.0938 405.4,546.0938 C405.9781,546.0938 406.5875,546.25 407.0563,546.5 C407.5406,546.7813 407.7125,547 407.8063,547.4063 C407.8688,547.8125 407.9,547.9375 408.0406,548.0625 C408.1813,548.2031 408.4156,548.3125 408.6344,548.3125 C408.9,548.3125 409.1656,548.1719 409.3375,547.9531 C409.4469,547.7969 409.4781,547.6094 409.4781,547.1875 L409.4781,545.7656 C409.4781,545.3281 409.4625,545.2031 409.3688,545.0469 C409.2125,544.7813 408.9313,544.6406 408.6344,544.6406 C408.3375,544.6406 408.1344,544.7344 407.9156,545.0469 L407.7438,544.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="424.6" y="554.1436">DefaultLeaderElection</text><line style="stroke:#181818;stroke-width:0.5;" x1="368" x2="611" y1="565.2969" y2="565.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="373" y="582.292">contender: LeaderContender</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233" x="373" y="598.5889">registry: LeaderElectionRegistry</text></g><!--class DefaultLeaderElectionService--><g id="elem_DefaultLeaderElectionService"><rect codeLine="82" fill="#F1F1F1" height="72.5938" id="DefaultLeaderElectionService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="371" x="595" y="375.2969"/><ellipse cx="669.25" cy="391.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M671.5938,386.9688 C670.6563,386.5313 670.0625,386.3906 669.1875,386.3906 C666.5625,386.3906 664.5625,388.4688 664.5625,391.1875 L664.5625,392.3125 C664.5625,394.8906 666.6719,396.7813 669.5625,396.7813 C670.7813,396.7813 671.9375,396.4844 672.6875,395.9375 C673.2656,395.5313 673.5938,395.0781 673.5938,394.6875 C673.5938,394.2344 673.2031,393.8438 672.7344,393.8438 C672.5156,393.8438 672.3125,393.9219 672.125,394.1094 C671.6719,394.5938 671.6719,394.5938 671.4844,394.6875 C671.0625,394.9531 670.375,395.0781 669.6094,395.0781 C667.5625,395.0781 666.2656,393.9844 666.2656,392.2813 L666.2656,391.1875 C666.2656,389.4063 667.5156,388.0938 669.25,388.0938 C669.8281,388.0938 670.4375,388.25 670.9063,388.5 C671.3906,388.7813 671.5625,389 671.6563,389.4063 C671.7188,389.8125 671.75,389.9375 671.8906,390.0625 C672.0313,390.2031 672.2656,390.3125 672.4844,390.3125 C672.75,390.3125 673.0156,390.1719 673.1875,389.9531 C673.2969,389.7969 673.3281,389.6094 673.3281,389.1875 L673.3281,387.7656 C673.3281,387.3281 673.3125,387.2031 673.2188,387.0469 C673.0625,386.7813 672.7813,386.6406 672.4844,386.6406 C672.1875,386.6406 671.9844,386.7344 671.7656,387.0469 L671.5938,386.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="214" x="689.75" y="396.1436">DefaultLeaderElectionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="596" x2="965" y1="407.2969" y2="407.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="309" x="601" y="424.292">leaderElectionDriver: LeaderElectionDriver</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="359" x="601" y="440.5889">leaderContenders: Collection&lt;LeaderContender&gt;</text></g><g id="elem_GMN23"><path d="M730,549.7969 L730,590.0625 A0,0 0 0 0 730,590.0625 L1039,590.0625 A0,0 0 0 0 1039,590.0625 L1039,559.7969 L1029,549.7969 L875.812,549.7969 L804.36,448.5869 L867.812,549.7969 L730,549.7969 A0,0 0 0 0 730,549.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1029,549.7969 L1029,559.7969 L1039,559.7969 L1029,549.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="736" y="566.8638">We should rename this to something like</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="284" x="736" y="581.9966">MultiContenderLeaderElectionService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1020" y="581.9966">.</text></g><!--class ZooKeeperLeaderElectionDriver--><g id="elem_ZooKeeperLeaderElectionDriver"><rect codeLine="76" fill="#F1F1F1" height="32" id="ZooKeeperLeaderElectionDriver" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="265" x="1370" y="719.7969"/><ellipse cx="1385" cy="735.7969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1387.3438,731.4688 C1386.4063,731.0313 1385.8125,730.8906 1384.9375,730.8906 C1382.3125,730.8906 1380.3125,732.9688 1380.3125,735.6875 L1380.3125,736.8125 C1380.3125,739.3906 1382.4219,741.2813 1385.3125,741.2813 C1386.5313,741.2813 1387.6875,740.9844 1388.4375,740.4375 C1389.0156,740.0313 1389.3438,739.5781 1389.3438,739.1875 C1389.3438,738.7344 1388.9531,738.3438 1388.4844,738.3438 C1388.2656,738.3438 1388.0625,738.4219 1387.875,738.6094 C1387.4219,739.0938 1387.4219,739.0938 1387.2344,739.1875 C1386.8125,739.4531 1386.125,739.5781 1385.3594,739.5781 C1383.3125,739.5781 1382.0156,738.4844 1382.0156,736.7813 L1382.0156,735.6875 C1382.0156,733.9063 1383.2656,732.5938 1385,732.5938 C1385.5781,732.5938 1386.1875,732.75 1386.6563,733 C1387.1406,733.2813 1387.3125,733.5 1387.4063,733.9063 C1387.4688,734.3125 1387.5,734.4375 1387.6406,734.5625 C1387.7813,734.7031 1388.0156,734.8125 1388.2344,734.8125 C1388.5,734.8125 1388.7656,734.6719 1388.9375,734.4531 C1389.0469,734.2969 1389.0781,734.1094 1389.0781,733.6875 L1389.0781,732.2656 C1389.0781,731.8281 1389.0625,731.7031 1388.9688,731.5469 C1388.8125,731.2813 1388.5313,731.1406 1388.2344,731.1406 C1387.9375,731.1406 1387.7344,731.2344 1387.5156,731.5469 L1387.3438,731.4688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233" x="1399" y="740.6436">ZooKeeperLeaderElectionDriver</text></g><!--class KubernetesLeaderElectionDriver--><g id="elem_KubernetesLeaderElectionDriver"><rect codeLine="79" fill="#F1F1F1" height="32" id="KubernetesLeaderElectionDriver" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="268" x="1066.5" y="719.7969"/><ellipse cx="1081.5" cy="735.7969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1083.8438,731.4688 C1082.9063,731.0313 1082.3125,730.8906 1081.4375,730.8906 C1078.8125,730.8906 1076.8125,732.9688 1076.8125,735.6875 L1076.8125,736.8125 C1076.8125,739.3906 1078.9219,741.2813 1081.8125,741.2813 C1083.0313,741.2813 1084.1875,740.9844 1084.9375,740.4375 C1085.5156,740.0313 1085.8438,739.5781 1085.8438,739.1875 C1085.8438,738.7344 1085.4531,738.3438 1084.9844,738.3438 C1084.7656,738.3438 1084.5625,738.4219 1084.375,738.6094 C1083.9219,739.0938 1083.9219,739.0938 1083.7344,739.1875 C1083.3125,739.4531 1082.625,739.5781 1081.8594,739.5781 C1079.8125,739.5781 1078.5156,738.4844 1078.5156,736.7813 L1078.5156,735.6875 C1078.5156,733.9063 1079.7656,732.5938 1081.5,732.5938 C1082.0781,732.5938 1082.6875,732.75 1083.1563,733 C1083.6406,733.2813 1083.8125,733.5 1083.9063,733.9063 C1083.9688,734.3125 1084,734.4375 1084.1406,734.5625 C1084.2813,734.7031 1084.5156,734.8125 1084.7344,734.8125 C1085,734.8125 1085.2656,734.6719 1085.4375,734.4531 C1085.5469,734.2969 1085.5781,734.1094 1085.5781,733.6875 L1085.5781,732.2656 C1085.5781,731.8281 1085.5625,731.7031 1085.4688,731.5469 C1085.3125,731.2813 1085.0313,731.1406 1084.7344,731.1406 C1084.4375,731.1406 1084.2344,731.2344 1084.0156,731.5469 L1083.8438,731.4688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="1095.5" y="740.6436">KubernetesLeaderElectionDriver</text></g><!--reverse link LeaderElection to DefaultLeaderElection--><g id="link_LeaderElection_DefaultLeaderElection"><path d="M268.66,329.4869 C324.542,390.0419 409.914,482.5549 456.447,532.9799 " fill="none" id="LeaderElection-backto-DefaultLeaderElection" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="263.201,333.8929,254.782,314.4479,273.49,324.3989,263.201,333.8929" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionDriver to ZooKeeperLeaderElectionDriver--><g id="link_LeaderElectionDriver_ZooKeeperLeaderElectionDriver"><path d="M1337.19,625.4769 C1387.25,658.5839 1447.46,698.3992 1479.61,719.6604 " fill="none" id="LeaderElectionDriver-backto-ZooKeeperLeaderElectionDriver" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1333.13,631.1859,1320.31,614.3149,1340.85,619.5079,1333.13,631.1859" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionDriver to KubernetesLeaderElectionDriver--><g id="link_LeaderElectionDriver_KubernetesLeaderElectionDriver"><path d="M1233.84,633.5459 C1223.57,664.7379 1212,699.8688 1205.55,719.466 " fill="none" id="LeaderElectionDriver-backto-KubernetesLeaderElectionDriver" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1227.27,631.1229,1240.17,614.3149,1240.56,635.5009,1227.27,631.1229" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionRegistry to DefaultLeaderElectionService--><g id="link_LeaderElectionRegistry_DefaultLeaderElectionService"><path d="M663.267,311.3259 C687.009,331.4709 715.446,355.5989 738.366,375.0469 " fill="none" id="LeaderElectionRegistry-backto-DefaultLeaderElectionService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="658.427,316.3999,647.705,298.1229,667.484,305.7249,658.427,316.3999" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionService to DefaultLeaderElectionService--><g id="link_LeaderElectionService_DefaultLeaderElectionService"><path d="M1150.04,304.1249 C1075.77,325.5639 979.351,353.3969 903.623,375.2559 " fill="none" id="LeaderElectionService-backto-DefaultLeaderElectionService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1148.23,297.3619,1169.39,298.5399,1152.12,310.8119,1148.23,297.3619" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionEventHandler to DefaultLeaderElectionService--><g id="link_LeaderElectionEventHandler_DefaultLeaderElectionService"><path d="M738.997,674.1479 C728.173,655.7919 718.075,634.9909 712.5,614.2969 C702.211,576.1029 701.879,563.3999 712.5,525.2969 C720.282,497.3769 737.079,469.4719 752.03,448.4379 " fill="none" id="LeaderElectionEventHandler-backto-DefaultLeaderElectionService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="745.024,670.5849,749.696,691.253,733.155,678.0089,745.024,670.5849" style="stroke:#181818;stroke-width:1.0;"/></g><!--link DefaultLeaderElectionService to DefaultLeaderElection--><g id="link_DefaultLeaderElectionService_DefaultLeaderElection"><path codeLine="84" d="M594.777,435.2519 C545.596,445.1959 501.874,459.1209 486.5,478.2969 C475.539,491.9689 474.692,510.8929 477.23,527.9029 " fill="none" id="DefaultLeaderElectionService-to-DefaultLeaderElection" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="478.118,533.1129,480.549,523.5688,477.2779,528.184,472.6628,524.9129,478.118,533.1129" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="487.5" y="491.3638">creates</text></g><!--link DefaultLeaderElection to DefaultLeaderElectionService--><g id="link_DefaultLeaderElection_DefaultLeaderElectionService"><path codeLine="87" d="M516.373,533.2859 C532.104,514.6339 553.388,492.7199 576.5,478.2969 C594.102,467.3129 613.718,458.0059 633.635,450.1659 " fill="none" id="DefaultLeaderElection-to-DefaultLeaderElectionService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="638.43,448.3089,628.5928,447.8289,633.7674,450.1145,631.4818,455.289,638.43,448.3089" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="577.5" y="491.3638">unregisters</text></g><!--link LeaderContender to LeaderElection--><g id="link_LeaderContender_LeaderElection"><path codeLine="85" d="M504.297,133.3559 C446.139,160.5379 371.385,195.4749 312.368,223.0569 " fill="none" id="LeaderContender-to-LeaderElection" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="307.788,225.1979,317.6351,225.011,312.3177,223.0809,314.2479,217.7635,307.788,225.1979" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="430.5" y="183.8638">uses</text></g><!--link LeaderContender to LeaderElectionRegistry--><g id="link_LeaderContender_LeaderElectionRegistry"><path codeLine="86" d="M601.903,133.5849 C605.097,165.3499 609.348,207.6149 612.24,236.3799 " fill="none" id="LeaderContender-to-LeaderElectionRegistry" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="612.764,241.5879,615.8441,232.233,612.2641,236.6129,607.8842,233.0329,612.764,241.5879" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="610.5" y="176.3638">uses to create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="609.5" y="191.4966">LeaderElection</text></g><!--link LeaderElectionDriver to LeaderElectionEventHandler--><g id="link_LeaderElectionDriver_LeaderElectionEventHandler"><path codeLine="89" d="M1129.25,614.3149 C1062.44,637.5289 980.316,666.0639 912.762,689.5365 " fill="none" id="LeaderElectionDriver-to-LeaderElectionEventHandler" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="907.923,691.2176,917.7373,692.0414,912.6459,689.5762,915.1111,684.4847,907.923,691.2176" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="1033.5" y="657.3638">uses</text></g><!--link DefaultLeaderElectionService to LeaderElectionDriver--><g id="link_DefaultLeaderElectionService_LeaderElectionDriver"><path codeLine="90" d="M888.651,448.3909 C956.562,470.7409 1044.75,499.7659 1117.53,523.7179 " fill="none" id="DefaultLeaderElectionService-to-LeaderElectionDriver" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1122.3,525.2879,1115.0124,518.6629,1117.5532,523.717,1112.499,526.2578,1122.3,525.2879" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="1018.5" y="491.3638">uses</text></g><!--link DefaultLeaderElectionService to LeaderContender--><g id="link_DefaultLeaderElectionService_LeaderContender"><path codeLine="91" d="M792.508,375.2889 C803.483,336.3899 814.783,273.1659 791.5,225.2969 C772.895,187.0439 737.604,157.5689 702.168,136.0279 " fill="none" id="DefaultLeaderElectionService-to-LeaderContender" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="697.847,133.4409,703.514,141.496,702.1369,136.0094,707.6235,134.6323,697.847,133.4409" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="806.5" y="274.3638">uses</text></g><!--SRC=[dLPDJzmm4BtdL_W6gEoY8hM75K9Q0MrNqAe2gPKgBjvaTcFXsAazMRgg-jyxTfoGxwNbjCGpRzwRUPxaA4NCxUBiB9TSOP79UQopirXoQsU9u5l3ioX2WHBOLwDpRI5X1ZOyHcs4shBZRs2iq8gTdp2zOPW2omg9OaOmkLQWaDq1Jy2m6mankaXCER9dRfbGQ7HIn0Gf55lcFARi3rAe9_Ps_lRT6tRyuMxrvNPs_lxT-Vb9554y62eD0V9AqmFbi7z7ZFvsMYIC62iipsqgycFfVpw0TInNroSlaGPs-WaQeUNP0tfXMy1hiB4HkIDDPt-YL2JzqXi1Ch6HqWZCY6sA2tQnlkn4pRje5sVhoqV5X6M5woXgOaCJ86ckWtNlLabVTTN7QoDsRUdFHc3Gir8RRJBkY_MUb3hNMbDl54kvxVN0myMIfjqLtgaUr8-IlDcHYazS9R9DLQkFdJafUBvhZIevQORV3myhdFOaNgLSRI4CloLzK4sBvY5D3s1sWfusv5Za1b_TkmgWQHtKkRi_Wu4UjZPLvz0voVaeTUoTSPs11cSbnGRYVInXxW5NwD9Y0np9WPJDzBEYN-kzX_X4Nbxkk91yBQJ0VIXdvn4vcZdE9V6rHjJPDFVlpjA5J1XGdrd6dvpDgJYdMwR0Y9Yzz9fqXjIbtQlOoVCOVcl0BtUVh0jQ5gYlN9VvMhw4CYiKWGWySkW_2xeGxZPbMdcGd2FLKGqDerE-XwsmQFPXpEr3kgtk5CnnvwAFJBm6E-IjfgbYhJR2PEExx9IL3vP9OkZPrBMMerThqgc7BLfvCy1KRgosMg6gJZLyMNVB9syCsQTlsgfbys1Ke67kk7Gl5CAbU9yiOSlZlIDmJIybUl5KEyGxQ6w9So2L0QOwcGyDCtZJUulrVTLqYtynibQj6aPakOIC2DhXeSQLxCLW7qmGl1XfH3MXuUAbF3l9iBsuvC2EM0nkZaPuJTaks9MM8UoYe-Toacj5ewBSMIDJETKsiQaVcG75ix1Bo1HMEqYt0wLughVcP_SvKbCRtQ7zAV_G-XOWx-Q4RJewxT0phtyQ8eDiJPsiwjqMz9y21Fl_1GzWT2fEZcUqNcN8q-6DVphnResYoPApsUM8lHVXHMMZxlUNo-a5q_fvJMIzbiiCvw6opAFgRBbXLgDyWw15O_zHqmT7qcVL-XW9MWwsRH3xtv9VEbNc_GK0]--></g></svg>