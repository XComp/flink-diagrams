<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1133px" preserveAspectRatio="none" style="width:1436px;height:1133px;background:#FFFFFF;" version="1.1" viewBox="0 0 1436 1133" width="1436px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="1061" x="180.5" y="22.9951">Proposed refactoring (Version 2) of the multi-component Leader Election that was introduced in Apache Flink 1.15+ (FLINK-26522)</text><!--class LeaderContender--><g id="elem_LeaderContender"><rect codeLine="5" fill="#F1F1F1" height="88.8906" id="LeaderContender" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="288" x="657.5" y="44.2969"/><ellipse cx="734.75" cy="60.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M735.7031,57.0781 L737.4219,57.0781 C737.8125,57.0781 738,57.0469 738.125,56.9688 C738.3906,56.8125 738.5313,56.5313 738.5313,56.2344 C738.5313,55.9688 738.4219,55.7031 738.1875,55.5313 C738.0156,55.4219 737.875,55.3906 737.4219,55.3906 L732.2813,55.3906 C731.8438,55.3906 731.7188,55.4063 731.5625,55.5 C731.3125,55.6563 731.1563,55.9531 731.1563,56.2344 C731.1563,56.5156 731.2969,56.7656 731.5156,56.9375 C731.6719,57.0469 731.8594,57.0781 732.2813,57.0781 L734,57.0781 L734,63.5938 L732.2813,63.5938 C731.8438,63.5938 731.7188,63.6094 731.5625,63.7188 C731.3125,63.875 731.1563,64.1563 731.1563,64.4531 C731.1563,64.7031 731.2969,64.9688 731.5156,65.125 C731.6719,65.25 731.875,65.2969 732.2813,65.2969 L737.4219,65.2969 C738.1719,65.2969 738.5313,65.0156 738.5313,64.4531 C738.5313,64.1719 738.4219,63.9219 738.1875,63.75 C738.0156,63.625 737.875,63.5938 737.4219,63.5938 L735.7031,63.5938 L735.7031,57.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="125" x="755.25" y="65.1436">LeaderContender</text><line style="stroke:#181818;stroke-width:0.5;" x1="658.5" x2="944.5" y1="76.2969" y2="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="276" x="663.5" y="93.292">void grantLeadership(leaderSessionID)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="663.5" y="109.5889">void revokeLeadership()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="663.5" y="125.8857">String getDescription()</text></g><g id="elem_GMN3"><path d="M980.5,68.7969 L980.5,84.7969 L945.562,88.7969 L980.5,92.7969 L980.5,109.0625 A0,0 0 0 0 980.5,109.0625 L1262.5,109.0625 A0,0 0 0 0 1262.5,109.0625 L1262.5,78.7969 L1252.5,68.7969 L980.5,68.7969 A0,0 0 0 0 980.5,68.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1252.5,68.7969 L1252.5,78.7969 L1262.5,78.7969 L1252.5,68.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="986.5" y="85.8638">LeaderContender.getDescription()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="990.5" y="100.9966">is used to replace the componentId</text></g><!--class LeaderElectionDriver--><g id="elem_LeaderElectionDriver"><rect codeLine="13" fill="#F1F1F1" height="88.8906" id="LeaderElectionDriver" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="361" x="289" y="794.2969"/><ellipse cx="389.75" cy="810.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M390.7031,807.0781 L392.4219,807.0781 C392.8125,807.0781 393,807.0469 393.125,806.9688 C393.3906,806.8125 393.5313,806.5313 393.5313,806.2344 C393.5313,805.9688 393.4219,805.7031 393.1875,805.5313 C393.0156,805.4219 392.875,805.3906 392.4219,805.3906 L387.2813,805.3906 C386.8438,805.3906 386.7188,805.4063 386.5625,805.5 C386.3125,805.6563 386.1563,805.9531 386.1563,806.2344 C386.1563,806.5156 386.2969,806.7656 386.5156,806.9375 C386.6719,807.0469 386.8594,807.0781 387.2813,807.0781 L389,807.0781 L389,813.5938 L387.2813,813.5938 C386.8438,813.5938 386.7188,813.6094 386.5625,813.7188 C386.3125,813.875 386.1563,814.1563 386.1563,814.4531 C386.1563,814.7031 386.2969,814.9688 386.5156,815.125 C386.6719,815.25 386.875,815.2969 387.2813,815.2969 L392.4219,815.2969 C393.1719,815.2969 393.5313,815.0156 393.5313,814.4531 C393.5313,814.1719 393.4219,813.9219 393.1875,813.75 C393.0156,813.625 392.875,813.5938 392.4219,813.5938 L390.7031,813.5938 L390.7031,807.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="151" x="410.25" y="815.1436">LeaderElectionDriver</text><line style="stroke:#181818;stroke-width:0.5;" x1="290" x2="649" y1="826.2969" y2="826.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="349" x="295" y="843.292">void writeLeaderInformation(LeaderInformation)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="295" y="859.5889">boolean hasLeadership()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="295" y="875.8857">void close()</text></g><!--class LeaderElectionEventHandler--><g id="elem_LeaderElectionEventHandler"><rect codeLine="20" fill="#F1F1F1" height="88.8906" id="LeaderElectionEventHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="392" x="491.5" y="1037.2969"/><ellipse cx="581.25" cy="1053.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M582.2031,1050.0781 L583.9219,1050.0781 C584.3125,1050.0781 584.5,1050.0469 584.625,1049.9688 C584.8906,1049.8125 585.0313,1049.5313 585.0313,1049.2344 C585.0313,1048.9688 584.9219,1048.7031 584.6875,1048.5313 C584.5156,1048.4219 584.375,1048.3906 583.9219,1048.3906 L578.7813,1048.3906 C578.3438,1048.3906 578.2188,1048.4063 578.0625,1048.5 C577.8125,1048.6563 577.6563,1048.9531 577.6563,1049.2344 C577.6563,1049.5156 577.7969,1049.7656 578.0156,1049.9375 C578.1719,1050.0469 578.3594,1050.0781 578.7813,1050.0781 L580.5,1050.0781 L580.5,1056.5938 L578.7813,1056.5938 C578.3438,1056.5938 578.2188,1056.6094 578.0625,1056.7188 C577.8125,1056.875 577.6563,1057.1563 577.6563,1057.4531 C577.6563,1057.7031 577.7969,1057.9688 578.0156,1058.125 C578.1719,1058.25 578.375,1058.2969 578.7813,1058.2969 L583.9219,1058.2969 C584.6719,1058.2969 585.0313,1058.0156 585.0313,1057.4531 C585.0313,1057.1719 584.9219,1056.9219 584.6875,1056.75 C584.5156,1056.625 584.375,1056.5938 583.9219,1056.5938 L582.2031,1056.5938 L582.2031,1050.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="204" x="601.75" y="1058.1436">LeaderElectionEventHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="492.5" x2="882.5" y1="1069.2969" y2="1069.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="327" x="497.5" y="1086.292">void onGrantLeadership(newLeaderSessionId)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="497.5" y="1102.5889">void onRevokeLeadership()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="497.5" y="1118.8857">void onLeaderInformationChange(leaderInformation)</text></g><!--class LeaderElectionService--><g id="elem_LeaderElectionService"><rect codeLine="27" fill="#F1F1F1" height="72.5938" id="LeaderElectionService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192" x="969.5" y="510.2969"/><ellipse cx="984.5" cy="526.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M985.4531,523.0781 L987.1719,523.0781 C987.5625,523.0781 987.75,523.0469 987.875,522.9688 C988.1406,522.8125 988.2813,522.5313 988.2813,522.2344 C988.2813,521.9688 988.1719,521.7031 987.9375,521.5313 C987.7656,521.4219 987.625,521.3906 987.1719,521.3906 L982.0313,521.3906 C981.5938,521.3906 981.4688,521.4063 981.3125,521.5 C981.0625,521.6563 980.9063,521.9531 980.9063,522.2344 C980.9063,522.5156 981.0469,522.7656 981.2656,522.9375 C981.4219,523.0469 981.6094,523.0781 982.0313,523.0781 L983.75,523.0781 L983.75,529.5938 L982.0313,529.5938 C981.5938,529.5938 981.4688,529.6094 981.3125,529.7188 C981.0625,529.875 980.9063,530.1563 980.9063,530.4531 C980.9063,530.7031 981.0469,530.9688 981.2656,531.125 C981.4219,531.25 981.625,531.2969 982.0313,531.2969 L987.1719,531.2969 C987.9219,531.2969 988.2813,531.0156 988.2813,530.4531 C988.2813,530.1719 988.1719,529.9219 987.9375,529.75 C987.7656,529.625 987.625,529.5938 987.1719,529.5938 L985.4531,529.5938 L985.4531,523.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="160" x="998.5" y="531.1436">LeaderElectionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="970.5" x2="1160.5" y1="542.2969" y2="542.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="975.5" y="559.292">void start()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="975.5" y="575.5889">void close()</text></g><g id="elem_GMN9"><path d="M948,376.7969 L948,417.0625 A0,0 0 0 0 948,417.0625 L1168.67,417.0625 L1095.15,510.1179 L1176.67,417.0625 L1429,417.0625 A0,0 0 0 0 1429,417.0625 L1429,386.7969 L1419,376.7969 L948,376.7969 A0,0 0 0 0 948,376.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1419,376.7969 L1419,386.7969 L1429,386.7969 L1419,376.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166" x="954" y="393.8638">LeaderElectionService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="1124" y="393.8638">is handling the LeaderElectionDriver lifecycle.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354" x="954" y="408.9966">It is created and owned by the HighAvailabilityServices.</text></g><g id="elem_GMN12"><path d="M852,653.2969 L852,708.6953 A0,0 0 0 0 852,708.6953 L1279,708.6953 A0,0 0 0 0 1279,708.6953 L1279,663.2969 L1269,653.2969 L1069.5,653.2969 L1065.5,583.5179 L1061.5,653.2969 L852,653.2969 A0,0 0 0 0 852,653.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1269,653.2969 L1269,663.2969 L1279,663.2969 L1269,653.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="858" y="670.3638">We could event make this a generic interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="1153" y="670.3638">ServiceAsync</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="858" y="685.4966">that extends</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="944" y="685.4966">AutoCloseableAsync</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1100" y="685.4966">since it's a quite common</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="858" y="700.6294">pattern.</text></g><!--class LeaderElectionRegistry--><g id="elem_LeaderElectionRegistry"><rect codeLine="42" fill="#F1F1F1" height="72.5938" id="LeaderElectionRegistry" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="317" x="411" y="510.2969"/><ellipse cx="482.75" cy="526.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M483.7031,523.0781 L485.4219,523.0781 C485.8125,523.0781 486,523.0469 486.125,522.9688 C486.3906,522.8125 486.5313,522.5313 486.5313,522.2344 C486.5313,521.9688 486.4219,521.7031 486.1875,521.5313 C486.0156,521.4219 485.875,521.3906 485.4219,521.3906 L480.2813,521.3906 C479.8438,521.3906 479.7188,521.4063 479.5625,521.5 C479.3125,521.6563 479.1563,521.9531 479.1563,522.2344 C479.1563,522.5156 479.2969,522.7656 479.5156,522.9375 C479.6719,523.0469 479.8594,523.0781 480.2813,523.0781 L482,523.0781 L482,529.5938 L480.2813,529.5938 C479.8438,529.5938 479.7188,529.6094 479.5625,529.7188 C479.3125,529.875 479.1563,530.1563 479.1563,530.4531 C479.1563,530.7031 479.2969,530.9688 479.5156,531.125 C479.6719,531.25 479.875,531.2969 480.2813,531.2969 L485.4219,531.2969 C486.1719,531.2969 486.5313,531.0156 486.5313,530.4531 C486.5313,530.1719 486.4219,529.9219 486.1875,529.75 C486.0156,529.625 485.875,529.5938 485.4219,529.5938 L483.7031,529.5938 L483.7031,523.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="165" x="503.25" y="531.1436">LeaderElectionRegistry</text><line style="stroke:#181818;stroke-width:0.5;" x1="412" x2="727" y1="542.2969" y2="542.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="305" x="417" y="559.292">LeaderElection register(LeaderContender)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="417" y="575.5889">void remove(LeaderContender)</text></g><!--class LeaderElection--><g id="elem_LeaderElection"><rect codeLine="48" fill="#F1F1F1" height="88.8906" id="LeaderElection" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="415" x="412" y="210.2969"/><ellipse cx="561.75" cy="226.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M562.7031,223.0781 L564.4219,223.0781 C564.8125,223.0781 565,223.0469 565.125,222.9688 C565.3906,222.8125 565.5313,222.5313 565.5313,222.2344 C565.5313,221.9688 565.4219,221.7031 565.1875,221.5313 C565.0156,221.4219 564.875,221.3906 564.4219,221.3906 L559.2813,221.3906 C558.8438,221.3906 558.7188,221.4063 558.5625,221.5 C558.3125,221.6563 558.1563,221.9531 558.1563,222.2344 C558.1563,222.5156 558.2969,222.7656 558.5156,222.9375 C558.6719,223.0469 558.8594,223.0781 559.2813,223.0781 L561,223.0781 L561,229.5938 L559.2813,229.5938 C558.8438,229.5938 558.7188,229.6094 558.5625,229.7188 C558.3125,229.875 558.1563,230.1563 558.1563,230.4531 C558.1563,230.7031 558.2969,230.9688 558.5156,231.125 C558.6719,231.25 558.875,231.2969 559.2813,231.2969 L564.4219,231.2969 C565.1719,231.2969 565.5313,231.0156 565.5313,230.4531 C565.5313,230.1719 565.4219,229.9219 565.1875,229.75 C565.0156,229.625 564.875,229.5938 564.4219,229.5938 L562.7031,229.5938 L562.7031,223.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="107" x="582.25" y="231.1436">LeaderElection</text><line style="stroke:#181818;stroke-width:0.5;" x1="413" x2="826" y1="242.2969" y2="242.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="418" y="259.292">void confirmLeadership(leaderSessionID, leaderAddress)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="287" x="418" y="275.5889">boolean hasLeadership(leaderSessionId)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="418" y="291.8857">void close()</text></g><g id="elem_GMN17"><path d="M439,361.2969 L439,431.8281 A0,0 0 0 0 439,431.8281 L810,431.8281 A0,0 0 0 0 810,431.8281 L810,371.2969 L800,361.2969 L627.264,361.2969 L621.055,299.3259 L619.264,361.2969 L439,361.2969 A0,0 0 0 0 439,361.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M800,361.2969 L800,371.2969 L810,371.2969 L800,361.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51" x="445" y="378.3638">close()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="500" y="378.3638">is used to unregister the LeaderContender</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="445" y="393.4966">from the LeaderElectionRegistry. It is equivalent to the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="445" y="408.6294">legacy</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="214" x="491" y="408.6294">DefaultLeaderService.stop()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="709" y="408.6294">method.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="445" y="423.7622">LeaderElection could extend AutoCloseableAsync.</text></g><!--class DefaultLeaderElection--><g id="elem_DefaultLeaderElection"><rect codeLine="61" fill="#F1F1F1" height="72.5938" id="DefaultLeaderElection" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="245" x="159" y="360.2969"/><ellipse cx="197.4" cy="376.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M199.7438,371.9688 C198.8063,371.5313 198.2125,371.3906 197.3375,371.3906 C194.7125,371.3906 192.7125,373.4688 192.7125,376.1875 L192.7125,377.3125 C192.7125,379.8906 194.8219,381.7813 197.7125,381.7813 C198.9313,381.7813 200.0875,381.4844 200.8375,380.9375 C201.4156,380.5313 201.7438,380.0781 201.7438,379.6875 C201.7438,379.2344 201.3531,378.8438 200.8844,378.8438 C200.6656,378.8438 200.4625,378.9219 200.275,379.1094 C199.8219,379.5938 199.8219,379.5938 199.6344,379.6875 C199.2125,379.9531 198.525,380.0781 197.7594,380.0781 C195.7125,380.0781 194.4156,378.9844 194.4156,377.2813 L194.4156,376.1875 C194.4156,374.4063 195.6656,373.0938 197.4,373.0938 C197.9781,373.0938 198.5875,373.25 199.0563,373.5 C199.5406,373.7813 199.7125,374 199.8063,374.4063 C199.8688,374.8125 199.9,374.9375 200.0406,375.0625 C200.1813,375.2031 200.4156,375.3125 200.6344,375.3125 C200.9,375.3125 201.1656,375.1719 201.3375,374.9531 C201.4469,374.7969 201.4781,374.6094 201.4781,374.1875 L201.4781,372.7656 C201.4781,372.3281 201.4625,372.2031 201.3688,372.0469 C201.2125,371.7813 200.9313,371.6406 200.6344,371.6406 C200.3375,371.6406 200.1344,371.7344 199.9156,372.0469 L199.7438,371.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="216.6" y="381.1436">DefaultLeaderElection</text><line style="stroke:#181818;stroke-width:0.5;" x1="160" x2="403" y1="392.2969" y2="392.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="165" y="409.292">contender: LeaderContender</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233" x="165" y="425.5889">registry: LeaderElectionRegistry</text></g><!--class DefaultLeaderElectionService--><g id="elem_DefaultLeaderElectionService"><rect codeLine="83" fill="#F1F1F1" height="72.5938" id="DefaultLeaderElectionService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="371" x="428" y="644.2969"/><ellipse cx="502.25" cy="660.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M504.5938,655.9688 C503.6563,655.5313 503.0625,655.3906 502.1875,655.3906 C499.5625,655.3906 497.5625,657.4688 497.5625,660.1875 L497.5625,661.3125 C497.5625,663.8906 499.6719,665.7813 502.5625,665.7813 C503.7813,665.7813 504.9375,665.4844 505.6875,664.9375 C506.2656,664.5313 506.5938,664.0781 506.5938,663.6875 C506.5938,663.2344 506.2031,662.8438 505.7344,662.8438 C505.5156,662.8438 505.3125,662.9219 505.125,663.1094 C504.6719,663.5938 504.6719,663.5938 504.4844,663.6875 C504.0625,663.9531 503.375,664.0781 502.6094,664.0781 C500.5625,664.0781 499.2656,662.9844 499.2656,661.2813 L499.2656,660.1875 C499.2656,658.4063 500.5156,657.0938 502.25,657.0938 C502.8281,657.0938 503.4375,657.25 503.9063,657.5 C504.3906,657.7813 504.5625,658 504.6563,658.4063 C504.7188,658.8125 504.75,658.9375 504.8906,659.0625 C505.0313,659.2031 505.2656,659.3125 505.4844,659.3125 C505.75,659.3125 506.0156,659.1719 506.1875,658.9531 C506.2969,658.7969 506.3281,658.6094 506.3281,658.1875 L506.3281,656.7656 C506.3281,656.3281 506.3125,656.2031 506.2188,656.0469 C506.0625,655.7813 505.7813,655.6406 505.4844,655.6406 C505.1875,655.6406 504.9844,655.7344 504.7656,656.0469 L504.5938,655.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="214" x="522.75" y="665.1436">DefaultLeaderElectionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="429" x2="798" y1="676.2969" y2="676.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="309" x="434" y="693.292">leaderElectionDriver: LeaderElectionDriver</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="359" x="434" y="709.5889">leaderContenders: Collection&lt;LeaderContender&gt;</text></g><g id="elem_GMN23"><path d="M84,660.7969 L84,701.0625 A0,0 0 0 0 84,701.0625 L393,701.0625 A0,0 0 0 0 393,701.0625 L393,684.7969 L427.918,680.7969 L393,676.7969 L393,670.7969 L383,660.7969 L84,660.7969 A0,0 0 0 0 84,660.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M383,660.7969 L383,670.7969 L393,670.7969 L383,660.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="90" y="677.8638">We should rename this to something like</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="284" x="90" y="692.9966">MultiContenderLeaderElectionService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="374" y="692.9966">.</text></g><!--class ZooKeeperLeaderElectionDriver--><g id="elem_ZooKeeperLeaderElectionDriver"><rect codeLine="77" fill="#F1F1F1" height="32" id="ZooKeeperLeaderElectionDriver" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="265" x="7" y="944.2969"/><ellipse cx="22" cy="960.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M24.3438,955.9688 C23.4063,955.5313 22.8125,955.3906 21.9375,955.3906 C19.3125,955.3906 17.3125,957.4688 17.3125,960.1875 L17.3125,961.3125 C17.3125,963.8906 19.4219,965.7813 22.3125,965.7813 C23.5313,965.7813 24.6875,965.4844 25.4375,964.9375 C26.0156,964.5313 26.3438,964.0781 26.3438,963.6875 C26.3438,963.2344 25.9531,962.8438 25.4844,962.8438 C25.2656,962.8438 25.0625,962.9219 24.875,963.1094 C24.4219,963.5938 24.4219,963.5938 24.2344,963.6875 C23.8125,963.9531 23.125,964.0781 22.3594,964.0781 C20.3125,964.0781 19.0156,962.9844 19.0156,961.2813 L19.0156,960.1875 C19.0156,958.4063 20.2656,957.0938 22,957.0938 C22.5781,957.0938 23.1875,957.25 23.6563,957.5 C24.1406,957.7813 24.3125,958 24.4063,958.4063 C24.4688,958.8125 24.5,958.9375 24.6406,959.0625 C24.7813,959.2031 25.0156,959.3125 25.2344,959.3125 C25.5,959.3125 25.7656,959.1719 25.9375,958.9531 C26.0469,958.7969 26.0781,958.6094 26.0781,958.1875 L26.0781,956.7656 C26.0781,956.3281 26.0625,956.2031 25.9688,956.0469 C25.8125,955.7813 25.5313,955.6406 25.2344,955.6406 C24.9375,955.6406 24.7344,955.7344 24.5156,956.0469 L24.3438,955.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233" x="36" y="965.1436">ZooKeeperLeaderElectionDriver</text></g><!--class KubernetesLeaderElectionDriver--><g id="elem_KubernetesLeaderElectionDriver"><rect codeLine="80" fill="#F1F1F1" height="32" id="KubernetesLeaderElectionDriver" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="268" x="307.5" y="944.2969"/><ellipse cx="322.5" cy="960.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M324.8438,955.9688 C323.9063,955.5313 323.3125,955.3906 322.4375,955.3906 C319.8125,955.3906 317.8125,957.4688 317.8125,960.1875 L317.8125,961.3125 C317.8125,963.8906 319.9219,965.7813 322.8125,965.7813 C324.0313,965.7813 325.1875,965.4844 325.9375,964.9375 C326.5156,964.5313 326.8438,964.0781 326.8438,963.6875 C326.8438,963.2344 326.4531,962.8438 325.9844,962.8438 C325.7656,962.8438 325.5625,962.9219 325.375,963.1094 C324.9219,963.5938 324.9219,963.5938 324.7344,963.6875 C324.3125,963.9531 323.625,964.0781 322.8594,964.0781 C320.8125,964.0781 319.5156,962.9844 319.5156,961.2813 L319.5156,960.1875 C319.5156,958.4063 320.7656,957.0938 322.5,957.0938 C323.0781,957.0938 323.6875,957.25 324.1563,957.5 C324.6406,957.7813 324.8125,958 324.9063,958.4063 C324.9688,958.8125 325,958.9375 325.1406,959.0625 C325.2813,959.2031 325.5156,959.3125 325.7344,959.3125 C326,959.3125 326.2656,959.1719 326.4375,958.9531 C326.5469,958.7969 326.5781,958.6094 326.5781,958.1875 L326.5781,956.7656 C326.5781,956.3281 326.5625,956.2031 326.4688,956.0469 C326.3125,955.7813 326.0313,955.6406 325.7344,955.6406 C325.4375,955.6406 325.2344,955.7344 325.0156,956.0469 L324.8438,955.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="336.5" y="965.1436">KubernetesLeaderElectionDriver</text></g><!--reverse link LeaderElection to DefaultLeaderElection--><g id="link_LeaderElection_DefaultLeaderElection"><path d="M495.77,307.0459 C453.086,324.7259 406.243,344.1279 367.27,360.2709 " fill="none" id="LeaderElection-backto-DefaultLeaderElection" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="493.251,300.5129,514.407,299.3259,498.609,313.4469,493.251,300.5129" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionDriver to ZooKeeperLeaderElectionDriver--><g id="link_LeaderElectionDriver_ZooKeeperLeaderElectionDriver"><path d="M330.145,890.2599 C276.401,909.7219 218.936,930.5319 181.314,944.1549 " fill="none" id="LeaderElectionDriver-backto-ZooKeeperLeaderElectionDriver" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="327.773,883.6749,348.962,883.4459,332.54,896.8379,327.773,883.6749" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionDriver to KubernetesLeaderElectionDriver--><g id="link_LeaderElectionDriver_KubernetesLeaderElectionDriver"><path d="M454.646,903.1919 C451.066,918.4719 447.56,933.4329 445.071,944.0579 " fill="none" id="LeaderElectionDriver-backto-KubernetesLeaderElectionDriver" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="447.855,901.4919,459.233,883.6159,461.486,904.6849,447.855,901.4919" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionRegistry to DefaultLeaderElectionService--><g id="link_LeaderElectionRegistry_DefaultLeaderElectionService"><path d="M587.76,602.5779 C592.428,616.5809 597.327,631.2779 601.583,644.0469 " fill="none" id="LeaderElectionRegistry-backto-DefaultLeaderElectionService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="581.091,604.7049,581.407,583.5179,594.372,600.2779,581.091,604.7049" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionService to DefaultLeaderElectionService--><g id="link_LeaderElectionService_DefaultLeaderElectionService"><path d="M969.597,591.0989 C949.028,599.4819 927.239,607.6989 906.5,614.2969 C871.11,625.5569 832.723,635.6229 795.749,644.2869 " fill="none" id="LeaderElectionService-backto-DefaultLeaderElectionService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="966.924,584.6289,988.078,583.3949,972.311,597.5509,966.924,584.6289" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link LeaderElectionEventHandler to DefaultLeaderElectionService--><g id="link_LeaderElectionEventHandler_DefaultLeaderElectionService"><path d="M689.847,1017.0529 C690.426,958.2439 687.26,868.9959 667.5,794.2969 C660.353,767.2789 646.697,738.9239 634.907,717.4399 " fill="none" id="LeaderElectionEventHandler-backto-DefaultLeaderElectionService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="696.842,1017.3869,689.488,1037.2592,682.844,1017.1379,696.842,1017.3869" style="stroke:#181818;stroke-width:1.0;"/></g><!--link DefaultLeaderElectionService to DefaultLeaderElection--><g id="link_DefaultLeaderElectionService_DefaultLeaderElection"><path codeLine="85" d="M441.075,644.2609 C405.207,630.1919 370.234,610.5899 343.5,583.2969 C304.991,543.9829 290.392,480.0999 284.863,438.5129 " fill="none" id="DefaultLeaderElectionService-to-DefaultLeaderElection" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="284.202,433.3029,281.3679,442.7352,284.832,438.263,289.3042,441.7271,284.202,433.3029" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="344.5" y="551.3638">creates</text></g><!--link LeaderContender to LeaderElection--><g id="link_LeaderContender_LeaderElection"><path codeLine="86" d="M753.205,133.3149 C728.112,155.9269 697.416,183.5869 671.767,206.6989 " fill="none" id="LeaderContender-to-LeaderElection" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="668.021,210.0749,677.3846,207.0214,671.7353,206.7277,672.0291,201.0785,668.021,210.0749" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="716.5" y="176.3638">uses</text></g><!--link DefaultLeaderElection to LeaderElectionRegistry--><g id="link_DefaultLeaderElection_LeaderElectionRegistry"><path codeLine="87" d="M350.85,433.4349 C394.619,455.9279 451.107,484.9559 495.702,507.8729 " fill="none" id="DefaultLeaderElection-to-LeaderElectionRegistry" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="500.253,510.2119,494.0769,502.5401,495.806,507.9262,490.4199,509.6553,500.253,510.2119" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="435.5" y="476.3638">unregisters</text></g><!--link LeaderElectionDriver to LeaderElectionEventHandler--><g id="link_LeaderElectionDriver_LeaderElectionEventHandler"><path codeLine="89" d="M527.613,883.3809 C549.441,901.0949 573.732,922.5079 593.5,944.2969 C618.183,971.5039 641.626,1005.5229 658.926,1032.7935 " fill="none" id="LeaderElectionDriver-to-LeaderElectionEventHandler" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="661.649,1037.1102,660.2314,1027.3639,658.9818,1032.881,653.4647,1031.6314,661.649,1037.1102" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="619.5" y="964.8638">uses</text></g><!--link DefaultLeaderElectionService to LeaderElectionDriver--><g id="link_DefaultLeaderElectionService_LeaderElectionDriver"><path codeLine="90" d="M580.463,717.5869 C560.523,739.1889 534.876,766.9739 513.262,790.3879 " fill="none" id="DefaultLeaderElectionService-to-LeaderElectionDriver" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="509.83,794.1059,518.8736,790.2055,513.2213,790.4317,512.995,784.7794,509.83,794.1059" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="551.5" y="760.3638">uses</text></g><!--link DefaultLeaderElectionService to LeaderContender--><g id="link_DefaultLeaderElectionService_LeaderContender"><path codeLine="91" d="M799.304,646.3579 C844.693,626.9489 880.5,596.2749 880.5,547.7969 C880.5,253.7969 880.5,253.7969 880.5,253.7969 C880.5,211.7769 859.189,169.1659 838.705,137.9129 " fill="none" id="DefaultLeaderElectionService-to-LeaderContender" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="835.691,133.3849,837.3466,143.0936,838.4609,137.5475,844.0069,138.6618,835.691,133.3849" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="881.5" y="401.3638">uses</text></g><!--SRC=[dLPDJnin4Btlh_0DK4aYaEWXGaWHWH91gmgaLgfwSNOdMGkllRLdGwEg_xrZnxliDsqv1NlcpRoPD-CzIX5pEv_DSiaL5fcSnZgRnP9REqa4tngUHH4AbC0-6vrh2mapiE4nQYFKbXr_0ME5LkpyXEaDmnHOLaWK4uB9jGA5x05u0eRTI8ZHMMBAaRrmouH2evCY9aYXs2BdCNdVIg6UsTdqxE8TExvzM7swdvo_lpW_FuaYiWT3eI50NciwK0xxLyJeRwT5mYXZXOTxcuhyMFgVJs1TbglboQkbWPr-XfhfuUu9FR4ju19iR4JkagQxtr4gacxeZG2Ps4Xf16R4DiKvkrnVjQocRRJBsVhgksB2ii9L53LbGnqWQgw2LUrMIPTrMSUb4RiczHSZCF1PgOqs6VV1EYS7dckjgJQAfTnsQk3XOadTRXDlHG_i1vEysH6BEwuIsKnLgm-jFYbuUMYqAZcfcp_sDolSTYXUfrnj8JI_GRsNJIFDjpWzWTa9EgtHiSWD_dNjIe2wT53dRdvw3Jri9QhMfLEIqr7gidV2TGBgxPKK6uZtiOIf1roXSuiDS2G5aZVJBuf-hVSUuewqlDXn8VbQI87x4CvE8r8qSpaV4bzhH9sDv_xLIRgG2GDNPvRnPwTpYivfp1GO4RFNOXFHuBkmUnKxVXx4hmtuwGRAEgD5WVhQbPclvQifiq8HYC0ZX_wZe8bmuvHfvK5oZXH7rKWCjlaHjiAYsOS-DozfNDqjcEFMf3VsIwPtq3NerKGLxItrrMKNQxKH9XlUTgViSB184aDdOuCl1uTlLCiD4GzfeHHmG2ebMww-GfNLh8ctAfXttXZ2xIgxhDeqg1ceuJikdSW8b-oziuGjZ_SkWIMzNFGwbOl6gsngQVP2KXbWgfDfNyE3WBt-M5TxTKNvrvCrObKm8iibP9IWxUzhNDAUzzR11CBpWKAKJUeFVg1dHpDiRZVPiqZclUkbPbwbREViMijWTjdYSpMQQvb6cRBNbuGDEdMDUPGBnwQ-OGOKpyAs8KbOxG3TcfJYkLgi7zqNIvNOu9hjzlYRrlS0UTidBDp1NeUAUVRZ41baQwfZ6U- -eFyK8DZ_3_W6HYlYQ7C6uvLoFEr_54v7djye6WqvcLmDY7iUtZ8RjJ_Hd4_7c9QFxG_LOrzjvtbjML6DUYiuwVetlY_6OjTfzeB_c_Dh3Gv-Vm00]--></g></svg>